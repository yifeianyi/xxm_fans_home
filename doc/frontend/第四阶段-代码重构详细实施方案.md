# ç¬¬å››é˜¶æ®µï¼šä»£ç é‡æ„è¯¦ç»†å®æ–½æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–¹æ¡ˆé’ˆå¯¹XXM Fans Homeå‰ç«¯é¡¹ç›®çš„ç¬¬å››é˜¶æ®µä¼˜åŒ–å·¥ä½œï¼Œé‡ç‚¹è§£å†³ä»£ç å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§é—®é¢˜ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„é‡æ„ï¼Œå°†å¤§å‹ç»„ä»¶æ‹†åˆ†ä¸ºèŒè´£å•ä¸€çš„å°ç»„ä»¶ï¼ŒæŠ½å–å¯å¤ç”¨çš„è‡ªå®šä¹‰Hooksï¼Œå®Œå–„ä»£ç æ³¨é‡Šä½“ç³»ï¼Œå»ºç«‹æ ‡å‡†åŒ–çš„ç»„ä»¶æ–‡æ¡£ã€‚

---

## ä¸€ã€ç»„ä»¶æ‹†åˆ†ç­–ç•¥

### 1.1 æ‹†åˆ†åŸåˆ™

#### åŸåˆ™1ï¼šå•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰
æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½æ¨¡å—ã€‚

**åˆ¤æ–­æ ‡å‡†ï¼š**
- ç»„ä»¶æ–‡ä»¶è¶…è¿‡300è¡Œ â†’ éœ€è¦æ‹†åˆ†
- ç»„ä»¶åŒ…å«å¤šä¸ªç‹¬ç«‹çš„åŠŸèƒ½å— â†’ éœ€è¦æ‹†åˆ†
- JSXåµŒå¥—å±‚çº§è¶…è¿‡5å±‚ â†’ éœ€è¦æ‹†åˆ†
- ç»„ä»¶propsæ•°é‡è¶…è¿‡7ä¸ª â†’ éœ€è¦æ‹†åˆ†

#### åŸåˆ™2ï¼šé«˜å†…èšä½è€¦åˆ
ç›¸å…³åŠŸèƒ½èšåˆåœ¨ä¸€èµ·ï¼Œå‡å°‘ç»„ä»¶é—´çš„ä¾èµ–ã€‚

#### åŸåˆ™3ï¼šå¯å¤ç”¨æ€§ä¼˜å…ˆ
å°†é€šç”¨åŠŸèƒ½æŠ½å–ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œä¾¿äºå¤ç”¨ã€‚

---

### 1.2 LivestreamPageç»„ä»¶æ‹†åˆ†

#### å½“å‰çŠ¶æ€åˆ†æ
```
LivestreamPage.tsx (700+ è¡Œ)
â”œâ”€â”€ çŠ¶æ€ç®¡ç†ï¼ˆ10+ useStateï¼‰
â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘ï¼ˆ15+ å‡½æ•°ï¼‰
â”œâ”€â”€ UIæ¸²æŸ“ï¼ˆå¤šå±‚åµŒå¥—ï¼‰
â””â”€â”€ å‰¯ä½œç”¨å¤„ç†ï¼ˆ5+ useEffectï¼‰
```

#### æ‹†åˆ†åçš„ç»“æ„
```
LivestreamPage/
â”œâ”€â”€ index.tsx                    # ä¸»é¡µé¢ç»„ä»¶ï¼ˆ<100è¡Œï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LivestreamHeader.tsx     # é¡µé¢å¤´éƒ¨
â”‚   â”œâ”€â”€ CalendarControl.tsx      # æ—¥å†æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ YearMonthSelector.tsx    # å¹´æœˆé€‰æ‹©å™¨
â”‚   â”œâ”€â”€ CalendarGrid.tsx         # æ—¥å†ç½‘æ ¼
â”‚   â”œâ”€â”€ CalendarCell.tsx         # æ—¥å†å•å…ƒæ ¼
â”‚   â”œâ”€â”€ LiveDetail.tsx           # ç›´æ’­è¯¦æƒ…å®¹å™¨
â”‚   â”œâ”€â”€ LiveInfoCard.tsx         # ç›´æ’­ä¿¡æ¯å¡ç‰‡
â”‚   â”œâ”€â”€ VideoPlayer.tsx          # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”œâ”€â”€ VideoSegmentTabs.tsx     # è§†é¢‘åˆ†æ®µæ ‡ç­¾
â”‚   â”œâ”€â”€ SongCutsList.tsx         # æ­Œåˆ‡åˆ—è¡¨
â”‚   â”œâ”€â”€ SongCutItem.tsx          # æ­Œåˆ‡é¡¹
â”‚   â”œâ”€â”€ ScreenshotsViewer.tsx    # æˆªå›¾æŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ ScreenshotThumbnail.tsx  # æˆªå›¾ç¼©ç•¥å›¾
â”‚   â””â”€â”€ DanmakuCloud.tsx         # å¼¹å¹•äº‘å›¾
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useLivestreamData.ts     # ç›´æ’­æ•°æ®Hook
â”‚   â”œâ”€â”€ useLivestreamDetail.ts   # ç›´æ’­è¯¦æƒ…Hook
â”‚   â”œâ”€â”€ useCalendarNavigation.ts # æ—¥å†å¯¼èˆªHook
â”‚   â””â”€â”€ useYearMonthSelector.ts  # å¹´æœˆé€‰æ‹©Hook
â””â”€â”€ types.ts                     # ç±»å‹å®šä¹‰
```

#### è¯¦ç»†æ‹†åˆ†æ–¹æ¡ˆ

##### 1.2.1 LivestreamHeaderï¼ˆé¡µé¢å¤´éƒ¨ï¼‰
```typescript
// LivestreamPage/components/LivestreamHeader.tsx
/**
 * ç›´æ’­é¡µé¢å¤´éƒ¨ç»„ä»¶
 * 
 * æ˜¾ç¤ºé¡µé¢æ ‡é¢˜ã€æè¿°å’Œä¸»é¢˜è‰²å›¾æ ‡
 * 
 * @component
 * @example
 * ```tsx
 * <LivestreamHeader />
 * ```
 */
interface LivestreamHeaderProps {
  title?: string;
  description?: string;
}

const LivestreamHeader: React.FC<LivestreamHeaderProps> = ({
  title = 'ç›´æ’­çºªäº‹',
  description = 'The Forest Archives'
}) => {
  return (
    <div className="flex items-center gap-6">
      <div className="bg-[#f8b195] text-white p-4 rounded-3xl shadow-lg shadow-[#f8b195]/20 animate-pulse">
        <Calendar size={24} />
      </div>
      <div>
        <h1 className="text-3xl font-black text-[#4a3728] tracking-tighter">{title}</h1>
        <p className="text-xs text-[#8eb69b] font-black uppercase tracking-[0.2em]">{description}</p>
      </div>
    </div>
  );
};

export default LivestreamHeader;
```

##### 1.2.2 CalendarControlï¼ˆæ—¥å†æ§åˆ¶å™¨ï¼‰
```typescript
// LivestreamPage/components/CalendarControl.tsx
/**
 * æ—¥å†æ§åˆ¶å™¨ç»„ä»¶
 * 
 * æä¾›æœˆä»½åˆ‡æ¢ã€å¹´æœˆé€‰æ‹©ã€è¿”å›ä»Šå¤©ç­‰åŠŸèƒ½
 * 
 * @component
 * @example
 * ```tsx
 * <CalendarControl
 *   currentDate={currentDate}
 *   onMonthChange={changeMonth}
 *   onDateChange={setDate}
 * />
 * ```
 */
interface CalendarControlProps {
  currentDate: Date;
  onMonthChange: (offset: number) => void;
  onDateChange: (date: Date) => void;
  minYear?: number;
}

const CalendarControl: React.FC<CalendarControlProps> = ({
  currentDate,
  onMonthChange,
  onDateChange,
  minYear = 2019
}) => {
  return (
    <div className="flex items-center gap-3 bg-white/60 p-2 rounded-3xl border border-white">
      <button onClick={() => onMonthChange(-1)} className="p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all">
        <ChevronLeft size={20} />
      </button>
      
      <YearMonthSelector
        currentDate={currentDate}
        minYear={minYear}
        onDateChange={onDateChange}
      />
      
      <button onClick={() => onMonthChange(1)} className="p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all">
        <ChevronRight size={20} />
      </button>
      
      <button
        onClick={() => {
          const today = new Date();
          onDateChange(new Date(today.getFullYear(), today.getMonth(), 1));
        }}
        className="px-4 py-2 bg-gray-50 hover:bg-[#d97706] hover:text-white rounded-2xl text-gray-600 font-black transition-all flex items-center gap-2 border border-gray-200"
      >
        ä»Šå¤©
      </button>
    </div>
  );
};

export default CalendarControl;
```

##### 1.2.3 YearMonthSelectorï¼ˆå¹´æœˆé€‰æ‹©å™¨ï¼‰
```typescript
// LivestreamPage/components/YearMonthSelector.tsx
/**
 * å¹´æœˆé€‰æ‹©å™¨ç»„ä»¶
 * 
 * æä¾›å¹´ä»½å’Œæœˆä»½çš„ä¸‹æ‹‰é€‰æ‹©åŠŸèƒ½
 * 
 * @component
 * @example
 * ```tsx
 * <YearMonthSelector
 *   currentDate={currentDate}
 *   minYear={2019}
 *   onDateChange={setDate}
 * />
 * ```
 */
interface YearMonthSelectorProps {
  currentDate: Date;
  minYear?: number;
  onDateChange: (date: Date) => void;
}

const YearMonthSelector: React.FC<YearMonthSelectorProps> = ({
  currentDate,
  minYear = 2019,
  onDateChange
}) => {
  const { isOpen, setIsOpen, tempYear, tempMonth, handleYearSelect, handleMonthSelect } = useYearMonthSelector(
    currentDate,
    minYear,
    onDateChange
  );

  return (
    <div className="relative">
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="px-4 py-2 hover:bg-white rounded-2xl text-[#4a3728] font-black tabular-nums transition-all flex items-center gap-2"
      >
        {currentDate.getFullYear()}å¹´ {currentDate.getMonth() + 1}æœˆ
        <ChevronRight size={14} className={`transform transition-transform ${isOpen ? 'rotate-90' : ''}`} />
      </button>

      {isOpen && (
        <YearMonthPicker
          isOpen={isOpen}
          onClose={() => setIsOpen(false)}
          minYear={minYear}
          tempYear={tempYear}
          tempMonth={tempMonth}
          onYearSelect={handleYearSelect}
          onMonthSelect={handleMonthSelect}
        />
      )}
    </div>
  );
};

export default YearMonthSelector;
```

##### 1.2.4 CalendarGridï¼ˆæ—¥å†ç½‘æ ¼ï¼‰
```typescript
// LivestreamPage/components/CalendarGrid.tsx
/**
 * æ—¥å†ç½‘æ ¼ç»„ä»¶
 * 
 * æ˜¾ç¤ºæœˆåº¦æ—¥å†ï¼ŒåŒ…å«æ˜ŸæœŸæ ‡é¢˜å’Œæ—¥æœŸå•å…ƒæ ¼
 * 
 * @component
 * @example
 * ```tsx
 * <CalendarGrid
 *   currentDate={currentDate}
 *   cells={calendarCells}
 *   todayStr={todayStr}
 *   onCellClick={handleCellClick}
 *   selectedDate={selectedLive?.date}
 * />
 * ```
 */
interface CalendarGridProps {
  currentDate: Date;
  cells: CalendarCell[];
  todayStr: string;
  onCellClick: (cell: CalendarCell) => void;
  selectedDate?: string;
}

const WEEKDAYS = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'];

const CalendarGrid: React.FC<CalendarGridProps> = ({
  currentDate,
  cells,
  todayStr,
  onCellClick,
  selectedDate
}) => {
  return (
    <div className="grid grid-cols-7 gap-1 bg-white/30 p-2 rounded-[2.5rem] border border-white/50 shadow-inner">
      {/* æ˜ŸæœŸæ ‡é¢˜ */}
      {WEEKDAYS.map((day, idx) => (
        <div
          key={day}
          className={`py-2 text-center text-[10px] font-black uppercase tracking-widest ${
            idx >= 5 ? 'text-[#f67280]' : 'text-[#8eb69b]'
          }`}
        >
          {day}
        </div>
      ))}
      
      {/* æ—¥æœŸå•å…ƒæ ¼ */}
      {cells.map((cell, idx) => (
        <CalendarCell
          key={idx}
          cell={cell}
          todayStr={todayStr}
          isSelected={selectedDate === cell.date}
          onClick={() => onCellClick(cell)}
        />
      ))}
    </div>
  );
};

export default CalendarGrid;
```

##### 1.2.5 CalendarCellï¼ˆæ—¥å†å•å…ƒæ ¼ï¼‰
```typescript
// LivestreamPage/components/CalendarCell.tsx
/**
 * æ—¥å†å•å…ƒæ ¼ç»„ä»¶
 * 
 * æ˜¾ç¤ºå•ä¸ªæ—¥æœŸï¼ŒåŒ…å«ç›´æ’­æ ‡è®°å’Œä»Šå¤©æ ‡è®°
 * 
 * @component
 * @example
 * ```tsx
 * <CalendarCell
 *   cell={{ day: 1, date: '2024-01-01', live: {...} }}
 *   todayStr="2024-01-31"
 *   isSelected={false}
 *   onClick={() => {...}}
 * />
 * ```
 */
interface CalendarCellProps {
  cell: CalendarCell;
  todayStr: string;
  isSelected: boolean;
  onClick: () => void;
}

const CalendarCell: React.FC<CalendarCellProps> = ({ cell, todayStr, isSelected, onClick }) => {
  const isToday = cell.date === todayStr;
  const hasLive = !!cell.live;

  return (
    <div
      onClick={hasLive ? onClick : undefined}
      className={`aspect-video flex items-center justify-center relative rounded-2xl transition-all ${
        cell.day ? 'bg-white/60' : 'bg-transparent'
      } ${hasLive ? 'cursor-pointer hover:bg-[#fef5f0] shadow-sm' : ''} ${
        isSelected ? 'bg-[#fef5f0] ring-4 ring-[#f8b195]/20' : ''
      } ${isToday ? 'ring-2 ring-[#8eb69b]/50' : ''}`}
    >
      <span
        className={`text-sm font-black ${
          hasLive ? 'text-[#f8b195]' : isToday ? 'text-[#8eb69b] font-bold' : 'text-[#4a3728]/40'
        }`}
      >
        {cell.day}
      </span>
      {hasLive && <div className="absolute bottom-1 w-1 h-1 rounded-full bg-[#f8b195]"></div>}
      {isToday && <div className="absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-[#8eb69b]"></div>}
    </div>
  );
};

export default CalendarCell;
```

##### 1.2.6 LiveDetailï¼ˆç›´æ’­è¯¦æƒ…å®¹å™¨ï¼‰
```typescript
// LivestreamPage/components/LiveDetail.tsx
/**
 * ç›´æ’­è¯¦æƒ…å®¹å™¨ç»„ä»¶
 * 
 * åŒ…å«ç›´æ’­ä¿¡æ¯ã€è§†é¢‘æ’­æ”¾å™¨ã€æ­Œåˆ‡åˆ—è¡¨ã€æˆªå›¾ã€å¼¹å¹•äº‘å›¾ç­‰å­ç»„ä»¶
 * 
 * @component
 * @example
 * ```tsx
 * <LiveDetail live={selectedLive} />
 * ```
 */
interface LiveDetailProps {
  live: Livestream;
}

const LiveDetail: React.FC<LiveDetailProps> = ({ live }) => {
  return (
    <div className="space-y-12 animate-in slide-in-from-bottom-8 duration-700">
      {/* ç¬¬ä¸€æ’ï¼šæ ¸å¿ƒå¤§æ ‡é¢˜ä¸å…³é”®æŒ‡æ ‡ */}
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch">
        <div className="lg:col-span-8">
          <LiveInfoCard live={live} />
        </div>
        <div className="lg:col-span-4">
          <LiveMetrics live={live} />
        </div>
      </div>

      {/* ç¬¬äºŒæ’ï¼šè§†é¢‘æ’­æ”¾å™¨ä¸æ­Œåˆ‡åˆ—è¡¨ */}
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-10 lg:items-start">
        <div className="lg:col-span-8">
          <VideoPlayer live={live} />
        </div>
        <div className="lg:col-span-4">
          <SongCutsList cuts={live.songCuts || []} />
        </div>
      </div>

      {/* ç¬¬ä¸‰æ’ï¼šæˆªå›¾ä¸å¼¹å¹•äº‘å›¾ */}
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
        <div className="lg:col-span-7">
          <ScreenshotsViewer screenshots={live.screenshots || []} />
        </div>
        <div className="lg:col-span-5">
          <DanmakuCloud cloudUrl={live.danmakuCloudUrl} />
        </div>
      </div>
    </div>
  );
};

export default LiveDetail;
```

##### 1.2.7 é‡æ„åçš„ä¸»é¡µé¢ç»„ä»¶
```typescript
// LivestreamPage/index.tsx
/**
 * ç›´æ’­é¡µé¢ç»„ä»¶ï¼ˆé‡æ„åï¼‰
 * 
 * æ˜¾ç¤ºæœˆåº¦ç›´æ’­æ—¥å†å’Œç›´æ’­è¯¦æƒ…
 * 
 * @component
 * @example
 * ```tsx
 * <LivestreamPage />
 * ```
 */
const LivestreamPage: React.FC = () => {
  const { currentDate, lives, loading, changeMonth, loadLives } = useLivestreamData();
  const { selectedLive, handleSelectLive } = useLivestreamDetail();

  return (
    <>
      <Helmet>
        <title>å’»å’»æ»¡ç›´æ’­è®°å½• - ç›´æ’­å›æ”¾ã€æ­Œæ›²å‰ªè¾‘ | å°æ»¡è™«ä¹‹å®¶</title>
        <meta name="description" content="æŸ¥çœ‹å’»å’»æ»¡çš„ç›´æ’­è®°å½•ï¼ŒåŒ…æ‹¬ç›´æ’­å›æ”¾ã€æ­Œæ›²å‰ªè¾‘å’Œç²¾å½©æˆªå›¾ã€‚" />
      </Helmet>

      <div className="max-w-7xl mx-auto px-4 py-8 space-y-12 animate-in fade-in duration-1000">
        {/* é¡¶éƒ¨æ§åˆ¶æ  */}
        <div className="flex flex-col md:flex-row items-center justify-between gap-6 bg-white/40 p-6 rounded-[3rem] border-2 border-white shadow-xl backdrop-blur-md">
          <LivestreamHeader />
          <CalendarControl
            currentDate={currentDate}
            onMonthChange={changeMonth}
            onDateChange={loadLives}
          />
        </div>

        {/* æ—¥å†ç½‘æ ¼ */}
        {loading ? (
          <Loading />
        ) : (
          <CalendarGrid
            currentDate={currentDate}
            cells={calendarCells}
            todayStr={todayStr}
            onCellClick={handleSelectLive}
            selectedDate={selectedLive?.date}
          />
        )}

        {/* ç›´æ’­è¯¦æƒ… */}
        {selectedLive && <LiveDetail live={selectedLive} />}
      </div>
    </>
  );
};

export default LivestreamPage;
```

---

### 1.3 å…¶ä»–å¤§å‹ç»„ä»¶æ‹†åˆ†

#### SongsPageç»„ä»¶æ‹†åˆ†
```
SongsPage/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PageHeader.tsx           # é¡µé¢å¤´éƒ¨
â”‚   â”œâ”€â”€ TabNavigation.tsx        # æ ‡ç­¾å¯¼èˆª
â”‚   â”œâ”€â”€ RankingChartTab.tsx      # çƒ­æ­Œæ¦œæ ‡ç­¾é¡µ
â”‚   â”œâ”€â”€ SongListTab.tsx          # æ­Œæ›²åˆ—è¡¨æ ‡ç­¾é¡µ
â”‚   â”œâ”€â”€ OriginalsTab.tsx         # åŸå”±ä½œå“æ ‡ç­¾é¡µ
â”‚   â””â”€â”€ SubmissionTimelineTab.tsx # æŠ•ç¨¿æ—¶åˆ»æ ‡ç­¾é¡µ
â””â”€â”€ hooks/
    â””â”€â”€ useTabs.ts               # æ ‡ç­¾åˆ‡æ¢Hook
```

#### GalleryPageç»„ä»¶æ‹†åˆ†
```
GalleryPage/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ GallerySidebar.tsx       # å›¾é›†ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ CategoryTree.tsx         # åˆ†ç±»æ ‘
â”‚   â”œâ”€â”€ GalleryGrid.tsx          # å›¾é›†ç½‘æ ¼
â”‚   â”œâ”€â”€ GalleryCard.tsx          # å›¾é›†å¡ç‰‡
â”‚   â”œâ”€â”€ ImageViewer.tsx          # å›¾ç‰‡æŸ¥çœ‹å™¨
â”‚   â””â”€â”€ ImageThumbnail.tsx       # å›¾ç‰‡ç¼©ç•¥å›¾
â””â”€â”€ hooks/
    â”œâ”€â”€ useGalleryData.ts        # å›¾é›†æ•°æ®Hook
    â””â”€â”€ useImageViewer.ts        # å›¾ç‰‡æŸ¥çœ‹Hook
```

#### TimelineChartç»„ä»¶æ‹†åˆ†
```
TimelineChart/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ YearRow.tsx              # å¹´ä»½è¡Œ
â”‚   â”œâ”€â”€ MonthCell.tsx            # æœˆä»½å•å…ƒæ ¼
â”‚   â”œâ”€â”€ MonthlyModal.tsx         # æœˆä»½è¯¦æƒ…å¼¹çª—
â”‚   â”œâ”€â”€ SubmissionList.tsx       # æŠ•ç¨¿åˆ—è¡¨
â”‚   â””â”€â”€ SubmissionItem.tsx       # æŠ•ç¨¿é¡¹
â””â”€â”€ hooks/
    â”œâ”€â”€ useTimelineData.ts       # æ—¶é—´çº¿æ•°æ®Hook
    â””â”€â”€ useMonthSelection.ts     # æœˆä»½é€‰æ‹©Hook
```

---

## äºŒã€è‡ªå®šä¹‰HooksæŠ½å–

### 2.1 HooksæŠ½å–åŸåˆ™

#### åŸåˆ™1ï¼šå¤ç”¨æ€§ä¼˜å…ˆ
å°†å¯å¤ç”¨çš„çŠ¶æ€é€»è¾‘æŠ½å–ä¸ºHookã€‚

#### åŸåˆ™2ï¼šå•ä¸€èŒè´£
æ¯ä¸ªHookåªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½ã€‚

#### åŸåˆ™3ï¼šå‘½åè§„èŒƒ
ä½¿ç”¨`use`å‰ç¼€ï¼Œæ¸…æ™°æè¿°Hookçš„åŠŸèƒ½ã€‚

---

### 2.2 é€šç”¨Hooksåº“

#### 2.2.1 useLocalStorageï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
```typescript
// shared/hooks/useLocalStorage.ts
/**
 * æœ¬åœ°å­˜å‚¨Hook
 * 
 * åœ¨localStorageä¸­æŒä¹…åŒ–çŠ¶æ€
 * 
 * @template T - å­˜å‚¨çš„æ•°æ®ç±»å‹
 * @param {string} key - å­˜å‚¨é”®å
 * @param {T} initialValue - åˆå§‹å€¼
 * @returns {[T, (value: T) => void, () => void]} [å­˜å‚¨çš„å€¼, è®¾ç½®å€¼, åˆ é™¤å€¼]
 * 
 * @example
 * ```tsx
 * const [theme, setTheme, removeTheme] = useLocalStorage('theme', 'light');
 * ```
 */
function useLocalStorage<T>(key: string, initialValue: T): [T, (value: T) => void, () => void] {
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(`Error reading localStorage key "${key}":`, error);
      return initialValue;
    }
  });

  const setValue = useCallback((value: T) => {
    try {
      setStoredValue(value);
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(`Error setting localStorage key "${key}":`, error);
    }
  }, [key]);

  const removeValue = useCallback(() => {
    try {
      setStoredValue(initialValue);
      window.localStorage.removeItem(key);
    } catch (error) {
      console.error(`Error removing localStorage key "${key}":`, error);
    }
  }, [key, initialValue]);

  return [storedValue, setValue, removeValue];
}

export default useLocalStorage;
```

#### 2.2.2 useDebounceï¼ˆé˜²æŠ–ï¼‰
```typescript
// shared/hooks/useDebounce.ts
/**
 * é˜²æŠ–Hook
 * 
 * å»¶è¿Ÿæ‰§è¡Œå‡½æ•°ï¼Œé¿å…é¢‘ç¹è§¦å‘
 * 
 * @template T - å‡½æ•°ç±»å‹
 * @param {T} func - è¦é˜²æŠ–çš„å‡½æ•°
 * @param {number} delay - å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
 * @returns {T} é˜²æŠ–åçš„å‡½æ•°
 * 
 * @example
 * ```tsx
 * const debouncedSearch = useDebounce(search, 500);
 * ```
 */
function useDebounce<T extends (...args: any[]) => any>(func: T, delay: number): T {
  const [debouncedFunc, setDebouncedFunc] = useState<T>(() => func);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedFunc(() => func);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [func, delay]);

  return debouncedFunc;
}

export default useDebounce;
```

#### 2.2.3 useClickOutsideï¼ˆç‚¹å‡»å¤–éƒ¨ï¼‰
```typescript
// shared/hooks/useClickOutside.ts
/**
 * ç‚¹å‡»å¤–éƒ¨Hook
 * 
 * æ£€æµ‹æ˜¯å¦ç‚¹å‡»äº†å…ƒç´ å¤–éƒ¨
 * 
 * @param {RefObject<HTMLElement>} ref - å…ƒç´ å¼•ç”¨
 * @param {() => void} handler - ç‚¹å‡»å¤–éƒ¨æ—¶çš„å›è°ƒ
 * 
 * @example
 * ```tsx
 * const modalRef = useRef<HTMLDivElement>(null);
 * useClickOutside(modalRef, () => setIsOpen(false));
 * ```
 */
function useClickOutside(ref: RefObject<HTMLElement>, handler: () => void): void {
  useEffect(() => {
    const listener = (event: MouseEvent | TouchEvent) => {
      if (!ref.current || ref.current.contains(event.target as Node)) {
        return;
      }
      handler();
    };

    document.addEventListener('mousedown', listener);
    document.addEventListener('touchstart', listener);

    return () => {
      document.removeEventListener('mousedown', listener);
      document.removeEventListener('touchstart', listener);
    };
  }, [ref, handler]);
}

export default useClickOutside;
```

#### 2.2.4 useMediaQueryï¼ˆåª’ä½“æŸ¥è¯¢ï¼‰
```typescript
// shared/hooks/useMediaQuery.ts
/**
 * åª’ä½“æŸ¥è¯¢Hook
 * 
 * å“åº”å¼è®¾è®¡ï¼Œæ£€æµ‹å±å¹•å°ºå¯¸
 * 
 * @param {string} query - CSSåª’ä½“æŸ¥è¯¢å­—ç¬¦ä¸²
 * @returns {boolean} æ˜¯å¦åŒ¹é…åª’ä½“æŸ¥è¯¢
 * 
 * @example
 * ```tsx
 * const isMobile = useMediaQuery('(max-width: 768px)');
 * ```
 */
function useMediaQuery(query: string): boolean {
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    const media = window.matchMedia(query);
    
    if (media.matches !== matches) {
      setMatches(media.matches);
    }

    const listener = () => {
      setMatches(media.matches);
    };

    if (typeof media.addEventListener === 'function') {
      media.addEventListener('change', listener);
    } else {
      media.addListener(listener);
    }

    return () => {
      if (typeof media.removeEventListener === 'function') {
        media.removeEventListener('change', listener);
      } else {
        media.removeListener(listener);
      }
    };
  }, [query, matches]);

  return matches;
}

export default useMediaQuery;
```

#### 2.2.5 useScrollPositionï¼ˆæ»šåŠ¨ä½ç½®ï¼‰
```typescript
// shared/hooks/useScrollPosition.ts
/**
 * æ»šåŠ¨ä½ç½®Hook
 * 
 * ç›‘å¬é¡µé¢æ»šåŠ¨ä½ç½®
 * 
 * @returns {{ x: number; y: number }} æ»šåŠ¨ä½ç½®
 * 
 * @example
 * ```tsx
 * const { x, y } = useScrollPosition();
 * const isScrolled = y > 100;
 * ```
 */
function useScrollPosition(): { x: number; y: number } {
  const [scrollPosition, setScrollPosition] = useState({ x: 0, y: 0 });

  useEffect(() => {
    const updatePosition = () => {
      setScrollPosition({
        x: window.scrollX,
        y: window.scrollY
      });
    };

    window.addEventListener('scroll', updatePosition);
    updatePosition();

    return () => window.removeEventListener('scroll', updatePosition);
  }, []);

  return scrollPosition;
}

export default useScrollPosition;
```

---

### 2.3 ä¸šåŠ¡Hooks

#### 2.3.1 useLivestreamDataï¼ˆç›´æ’­æ•°æ®ï¼‰
```typescript
// LivestreamPage/hooks/useLivestreamData.ts
/**
 * ç›´æ’­æ•°æ®Hook
 * 
 * ç®¡ç†ç›´æ’­é¡µé¢çš„æ ¸å¿ƒæ•°æ®å’Œæ“ä½œ
 * 
 * @returns ç›´æ’­æ•°æ®çŠ¶æ€å’Œæ“ä½œå‡½æ•°
 * 
 * @example
 * ```tsx
 * const { currentDate, lives, loading, changeMonth, loadLives } = useLivestreamData();
 * ```
 */
interface UseLivestreamDataReturn {
  currentDate: Date;
  lives: Livestream[];
  loading: boolean;
  error: string | null;
  calendarCells: CalendarCell[];
  todayStr: string;
  changeMonth: (offset: number) => void;
  loadLives: (year: number, month: number) => Promise<void>;
  refresh: () => Promise<void>;
}

export const useLivestreamData = (): UseLivestreamDataReturn => {
  const [currentDate, setCurrentDate] = useState(() => {
    const today = new Date();
    return new Date(today.getFullYear(), today.getMonth(), 1);
  });
  
  const [lives, setLives] = useState<Livestream[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const todayStr = useMemo(() => {
    const today = new Date();
    return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
  }, []);

  const daysInMonth = useMemo(() => {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const firstDay = new Date(year, month, 1).getDay() || 7;
    const days = new Date(year, month + 1, 0).getDate();
    return { firstDay, days };
  }, [currentDate]);

  const calendarCells = useMemo(() => {
    const cells = [];
    
    // ç©ºç™½å•å…ƒæ ¼
    for (let i = 1; i < daysInMonth.firstDay; i++) {
      cells.push({ day: null, date: '' });
    }
    
    // æ—¥æœŸå•å…ƒæ ¼
    for (let i = 1; i <= daysInMonth.days; i++) {
      const dateStr = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
      const live = lives.find(l => l.date === dateStr);
      cells.push({ day: i, date: dateStr, live });
    }
    
    return cells;
  }, [daysInMonth, lives, currentDate]);

  const loadLives = useCallback(async (year: number, month: number): Promise<void> => {
    setLoading(true);
    setError(null);

    try {
      const result = await songService.getLivestreams(year, month);
      
      if (result.error) {
        setError(result.error.message);
        setLives([]);
      } else {
        setLives(result.data || []);
      }
    } catch (err) {
      setError('åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      setLives([]);
    } finally {
      setLoading(false);
    }
  }, []);

  const changeMonth = useCallback((offset: number) => {
    setCurrentDate(prev => new Date(
      prev.getFullYear(),
      prev.getMonth() + offset,
      1
    ));
  }, []);

  const refresh = useCallback(async () => {
    await loadLives(currentDate.getFullYear(), currentDate.getMonth() + 1);
  }, [currentDate, loadLives]);

  useEffect(() => {
    loadLives(currentDate.getFullYear(), currentDate.getMonth() + 1);
  }, [currentDate, loadLives]);

  return {
    currentDate,
    lives,
    loading,
    error,
    calendarCells,
    todayStr,
    changeMonth,
    loadLives,
    refresh
  };
};
```

#### 2.3.2 useLivestreamDetailï¼ˆç›´æ’­è¯¦æƒ…ï¼‰
```typescript
// LivestreamPage/hooks/useLivestreamDetail.ts
/**
 * ç›´æ’­è¯¦æƒ…Hook
 * 
 * ç®¡ç†é€‰ä¸­ç›´æ’­çš„è¯¦æƒ…æ•°æ®
 * 
 * @returns ç›´æ’­è¯¦æƒ…çŠ¶æ€å’Œæ“ä½œå‡½æ•°
 * 
 * @example
 * ```tsx
 * const { selectedLive, loading, handleSelectLive, reload } = useLivestreamDetail();
 * ```
 */
interface UseLivestreamDetailReturn {
  selectedLive: Livestream | null;
  loading: boolean;
  error: string | null;
  handleSelectLive: (live: Livestream) => void;
  reload: () => Promise<void>;
  clearSelection: () => void;
}

export const useLivestreamDetail = (): UseLivestreamDetailReturn => {
  const [selectedLive, setSelectedLive] = useState<Livestream | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const liveDetailRef = useRef<HTMLDivElement>(null);

  const fetchLivestreamDetail = useCallback(async (date: string): Promise<void> => {
    if (!date) return;

    setLoading(true);
    setError(null);

    try {
      const result = await songService.getLivestreamByDate(date);
      
      if (result.error) {
        setError(result.error.message);
        setSelectedLive(null);
      } else {
        setSelectedLive(result.data || null);
        
        // æ»šåŠ¨åˆ°è¯¦æƒ…åŒºåŸŸ
        setTimeout(() => {
          liveDetailRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
      }
    } catch (err) {
      setError('åŠ è½½è¯¦æƒ…å¤±è´¥');
      setSelectedLive(null);
    } finally {
      setLoading(false);
    }
  }, []);

  const handleSelectLive = useCallback((live: Livestream) => {
    fetchLivestreamDetail(live.date);
  }, [fetchLivestreamDetail]);

  const reload = useCallback(async () => {
    if (selectedLive) {
      await fetchLivestreamDetail(selectedLive.date);
    }
  }, [selectedLive, fetchLivestreamDetail]);

  const clearSelection = useCallback(() => {
    setSelectedLive(null);
    setError(null);
  }, []);

  return {
    selectedLive,
    loading,
    error,
    handleSelectLive,
    reload,
    clearSelection
  };
};
```

#### 2.3.3 useYearMonthSelectorï¼ˆå¹´æœˆé€‰æ‹©ï¼‰
```typescript
// LivestreamPage/hooks/useYearMonthSelector.ts
/**
 * å¹´æœˆé€‰æ‹©Hook
 * 
 * ç®¡ç†å¹´æœˆé€‰æ‹©å™¨çš„çŠ¶æ€å’Œé€»è¾‘
 * 
 * @param {Date} currentDate - å½“å‰æ—¥æœŸ
 * @param {number} minYear - æœ€å°å¹´ä»½
 * @param {(date: Date) => void} onDateChange - æ—¥æœŸå˜æ›´å›è°ƒ
 * @returns å¹´æœˆé€‰æ‹©å™¨çŠ¶æ€å’Œæ“ä½œå‡½æ•°
 * 
 * @example
 * ```tsx
 * const { isOpen, setIsOpen, tempYear, tempMonth, handleYearSelect, handleMonthSelect } = useYearMonthSelector(currentDate, 2019, setDate);
 * ```
 */
interface UseYearMonthSelectorParams {
  currentDate: Date;
  minYear: number;
  onDateChange: (date: Date) => void;
}

interface UseYearMonthSelectorReturn {
  isOpen: boolean;
  setIsOpen: (open: boolean) => void;
  tempYear: number;
  tempMonth: number;
  yearRange: number[];
  handleYearSelect: (year: number) => void;
  handleMonthSelect: (month: number) => void;
}

export const useYearMonthSelector = ({
  currentDate,
  minYear,
  onDateChange
}: UseYearMonthSelectorParams): UseYearMonthSelectorReturn => {
  const [isOpen, setIsOpen] = useState(false);
  const [tempYear, setTempYear] = useState(() => currentDate.getFullYear());
  const [tempMonth, setTempMonth] = useState(() => currentDate.getMonth());

  const maxYear = useMemo(() => new Date().getFullYear(), []);
  
  const yearRange = useMemo(() => {
    return Array.from({ length: maxYear - minYear + 1 }, (_, i) => minYear + i);
  }, [minYear, maxYear]);

  // å½“é€‰æ‹©å™¨æ‰“å¼€æ—¶ï¼ŒåŒæ­¥å½“å‰æ—¥æœŸåˆ°ä¸´æ—¶çŠ¶æ€
  useEffect(() => {
    if (isOpen) {
      setTempYear(currentDate.getFullYear());
      setTempMonth(currentDate.getMonth());
    }
  }, [isOpen, currentDate]);

  const handleYearSelect = useCallback((year: number) => {
    setTempYear(year);
    onDateChange(new Date(year, tempMonth, 1));
  }, [tempMonth, onDateChange]);

  const handleMonthSelect = useCallback((month: number) => {
    setTempMonth(month);
    onDateChange(new Date(tempYear, month, 1));
    setIsOpen(false);
  }, [tempYear, onDateChange]);

  return {
    isOpen,
    setIsOpen,
    tempYear,
    tempMonth,
    yearRange,
    handleYearSelect,
    handleMonthSelect
  };
};
```

#### 2.3.4 useSongDataï¼ˆæ­Œæ›²æ•°æ®ï¼‰
```typescript
// presentation/hooks/useSongData.ts
/**
 * æ­Œæ›²æ•°æ®Hook
 * 
 * ç®¡ç†æ­Œæ›²åˆ—è¡¨çš„åŠ è½½ã€ç­›é€‰ã€åˆ†é¡µ
 * 
 * @param {GetSongsParams} initialParams - åˆå§‹æŸ¥è¯¢å‚æ•°
 * @returns æ­Œæ›²æ•°æ®çŠ¶æ€å’Œæ“ä½œå‡½æ•°
 * 
 * @example
 * ```tsx
 * const { songs, loading, error, filters, setFilters, loadSongs } = useSongData({ page: 1 });
 * ```
 */
interface UseSongDataParams {
  initialParams?: GetSongsParams;
}

interface UseSongDataReturn {
  songs: Song[];
  loading: boolean;
  error: string | null;
  filters: FilterState;
  pagination: { page: number; pageSize: number; total: number; totalPages: number };
  setFilters: (filters: FilterState) => void;
  loadSongs: (params?: GetSongsParams) => Promise<void>;
  clearFilters: () => void;
}

export const useSongData = ({ initialParams = {} }: UseSongDataParams = {}): UseSongDataReturn => {
  const [songs, setSongs] = useState<Song[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [filters, setFilters] = useState<FilterState>({
    genres: [],
    tags: [],
    languages: []
  });
  const [pagination, setPagination] = useState({
    page: initialParams.page || 1,
    pageSize: initialParams.limit || 50,
    total: 0,
    totalPages: 0
  });

  const loadSongs = useCallback(async (params?: GetSongsParams): Promise<void> => {
    setLoading(true);
    setError(null);

    try {
      const requestParams: GetSongsParams = {
        page: pagination.page,
        limit: pagination.pageSize,
        styles: filters.genres.join(','),
        tags: filters.tags.join(','),
        language: filters.languages[0],
        ...params
      };

      const result = await songService.getSongs(requestParams);
      
      if (result.error) {
        setError(result.error.message);
        setSongs([]);
      } else {
        setSongs(result.data?.results || []);
        setPagination(prev => ({
          ...prev,
          total: result.data?.total || 0,
          totalPages: Math.ceil((result.data?.total || 0) / prev.pageSize)
        }));
      }
    } catch (err) {
      setError('åŠ è½½æ­Œæ›²å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      setSongs([]);
    } finally {
      setLoading(false);
    }
  }, [filters, pagination.page, pagination.pageSize]);

  const clearFilters = useCallback(() => {
    setFilters({ genres: [], tags: [], languages: [] });
    setPagination(prev => ({ ...prev, page: 1 }));
  }, []);

  useEffect(() => {
    loadSongs();
  }, [loadSongs]);

  return {
    songs,
    loading,
    error,
    filters,
    pagination,
    setFilters,
    loadSongs,
    clearFilters
  };
};
```

#### 2.3.5 useErrorHandlerï¼ˆé”™è¯¯å¤„ç†ï¼‰
```typescript
// presentation/hooks/useErrorHandler.ts
/**
 * é”™è¯¯å¤„ç†Hook
 * 
 * ç»Ÿä¸€å¤„ç†é”™è¯¯ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
 * 
 * @returns é”™è¯¯çŠ¶æ€å’Œå¤„ç†å‡½æ•°
 * 
 * @example
 * ```tsx
 * const { error, isError, handleError, clearError } = useErrorHandler();
 * ```
 */
interface UseErrorHandlerReturn {
  error: string | null;
  isError: boolean;
  handleError: (error: unknown, category?: ErrorCategory, context?: Record<string, any>) => void;
  clearError: () => void;
}

export const useErrorHandler = (): UseErrorHandlerReturn => {
  const [error, setError] = useState<string | null>(null);

  const handleError = useCallback((err: unknown, category: ErrorCategory = ErrorCategory.UNKNOWN, context?: Record<string, any>): void => {
    errorHandler.handleError(err, category, context);
    
    let errorMessage = 'æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
    if (err instanceof Error) {
      errorMessage = err.message;
    } else if (typeof err === 'string') {
      errorMessage = err;
    }

    setError(errorMessage);

    // 3ç§’åè‡ªåŠ¨æ¸…é™¤é”™è¯¯
    setTimeout(() => {
      setError(null);
    }, 3000);
  }, []);

  const clearError = useCallback(() => {
    setError(null);
  }, []);

  return {
    error,
    isError: error !== null,
    handleError,
    clearError
  };
};
```

---

## ä¸‰ã€ä»£ç æ³¨é‡Šè§„èŒƒ

### 3.1 æ³¨é‡ŠåŸåˆ™

#### åŸåˆ™1ï¼šè§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œé"æ˜¯ä»€ä¹ˆ"
ä»£ç æœ¬èº«å·²ç»è¯´æ˜äº†"æ˜¯ä»€ä¹ˆ"ï¼Œæ³¨é‡Šåº”è¯¥è§£é‡Š"ä¸ºä»€ä¹ˆ"è¿™æ ·åšã€‚

#### åŸåˆ™2ï¼šä¿æŒæ³¨é‡Šä¸ä»£ç åŒæ­¥
ä»£ç å˜æ›´æ—¶ï¼Œå¿…é¡»æ›´æ–°ç›¸å…³æ³¨é‡Šã€‚

#### åŸåˆ™3ï¼šé¿å…æ— ç”¨æ³¨é‡Š
ä¸è¦ä¸ºæ˜¾è€Œæ˜“è§çš„ä»£ç æ·»åŠ æ³¨é‡Šã€‚

---

### 3.2 æ–‡ä»¶å¤´æ³¨é‡Š

```typescript
/**
 * LivestreamPage - ç›´æ’­é¡µé¢ç»„ä»¶
 * 
 * @module LivestreamPage
 * @description æ˜¾ç¤ºæœˆåº¦ç›´æ’­æ—¥å†ï¼Œæ”¯æŒæŒ‰å¹´æœˆæµè§ˆç›´æ’­è®°å½•ã€‚
 *              ç‚¹å‡»æ—¥æœŸå¯æŸ¥çœ‹è¯¥æ—¥æœŸçš„ç›´æ’­è¯¦æƒ…ï¼ŒåŒ…æ‹¬è§†é¢‘å›æ”¾ã€æ­Œåˆ‡åˆ—è¡¨ã€æˆªå›¾ç­‰ã€‚
 * 
 * @author XXM Team
 * @version 2.0.0
 * @since 2024-01-01
 * @license MIT
 * 
 * @example
 * ```tsx
 * import LivestreamPage from './LivestreamPage';
 * 
 * function App() {
 *   return <LivestreamPage />;
 * }
 * ```
 * 
 * @see {@link https://github.com/xxm/xxm-fans-home} é¡¹ç›®ä»“åº“
 * @see {@link ./components/LivestreamHeader} ç›¸å…³ç»„ä»¶
 */
```

---

### 3.3 ç»„ä»¶æ³¨é‡Š

```typescript
/**
 * æ—¥å†ç½‘æ ¼ç»„ä»¶
 * 
 * æ˜¾ç¤ºæœˆåº¦æ—¥å†ï¼ŒåŒ…å«æ˜ŸæœŸæ ‡é¢˜å’Œæ—¥æœŸå•å…ƒæ ¼ã€‚æ”¯æŒï¼š
 * - æ˜¾ç¤ºæ¯æœˆçš„æ—¥å†ç½‘æ ¼
 * - é«˜äº®æ˜¾ç¤ºä»Šå¤©
 * - æ ‡è®°æœ‰ç›´æ’­çš„æ—¥æœŸ
 * - é«˜äº®é€‰ä¸­çš„æ—¥æœŸ
 * - ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹ç›´æ’­è¯¦æƒ…
 * 
 * @component
 * 
 * @example åŸºç¡€ç”¨æ³•
 * ```tsx
 * <CalendarGrid
 *   currentDate={currentDate}
 *   cells={calendarCells}
 *   todayStr="2024-01-31"
 *   onCellClick={handleCellClick}
 * />
 * ```
 * 
 * @example å¸¦é€‰ä¸­çŠ¶æ€
 * ```tsx
 * <CalendarGrid
 *   currentDate={currentDate}
 *   cells={calendarCells}
 *   todayStr={2024-01-31}
 *   onCellClick={handleCellClick}
 *   selectedDate="2024-01-15"
 * />
 * ```
 * 
 * @param {CalendarGridProps} props - ç»„ä»¶å±æ€§
 * @param {Date} props.currentDate - å½“å‰æ˜¾ç¤ºçš„æœˆä»½
 * @param {CalendarCell[]} props.cells - æ—¥å†å•å…ƒæ ¼æ•°ç»„
 * @param {string} props.todayStr - ä»Šå¤©çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆYYYY-MM-DDï¼‰
 * @param {(cell: CalendarCell) => void} props.onCellClick - ç‚¹å‡»å•å…ƒæ ¼çš„å›è°ƒ
 * @param {string} [props.selectedDate] - é€‰ä¸­çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆå¯é€‰ï¼‰
 * 
 * @returns {JSX.Element} æ—¥å†ç½‘æ ¼ç»„ä»¶
 * 
 * @category Components
 * @subcategory LivestreamPage
 * 
 * @version 2.0.0
 * @since 2024-01-01
 * 
 * @see {@link CalendarCell} æ—¥å†å•å…ƒæ ¼ç»„ä»¶
 * @see {@link useLivestreamData} ç›´æ’­æ•°æ®Hook
 */
```

---

### 3.4 å‡½æ•°æ³¨é‡Š

```typescript
/**
 * è®¡ç®—æ—¥å†å•å…ƒæ ¼
 * 
 * æ ¹æ®å½“å‰å¹´æœˆç”Ÿæˆæ—¥å†ç½‘æ ¼ï¼ŒåŒ…æ‹¬ï¼š
 * 1. ç©ºç™½å•å…ƒæ ¼ï¼šæœˆåˆå‰çš„ç©ºç™½å¤©æ•°
 * 2. æ—¥æœŸå•å…ƒæ ¼ï¼šå½“æœˆçš„æ‰€æœ‰æ—¥æœŸï¼ŒåŒ…å«ç›´æ’­æ ‡è®°
 * 
 * ç®—æ³•è¯´æ˜ï¼š
 * - è·å–å½“æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ ï¼ˆ1=å‘¨ä¸€ï¼Œ7=å‘¨æ—¥ï¼‰
 * - åœ¨ç¬¬ä¸€è¡Œæ·»åŠ ç›¸åº”æ•°é‡çš„ç©ºç™½å•å…ƒæ ¼
 * - æ·»åŠ å½“æœˆæ‰€æœ‰æ—¥æœŸå•å…ƒæ ¼ï¼Œæ¯ä¸ªæ—¥æœŸå•å…ƒæ ¼åŒ…å«ï¼š
 *   - æ—¥æœŸæ•°å­—
 *   - æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆYYYY-MM-DDæ ¼å¼ï¼‰
 *   - ç›´æ’­è®°å½•ï¼ˆå¦‚æœæœ‰ï¼‰
 * 
 * @example ç”Ÿæˆ2024å¹´1æœˆçš„æ—¥å†å•å…ƒæ ¼
 * ```typescript
 * const cells = generateCalendarCells(2024, 0, lives);
 * // è¿”å›: [
 * //   { day: null, date: '' },
 * //   { day: null, date: '' },
 * //   { day: 1, date: '2024-01-01', live: {...} },
 * //   ...
 * // ]
 * ```
 * 
 * @param {number} year - å¹´ä»½
 * @param {number} month - æœˆä»½ï¼ˆ0-11ï¼Œ0è¡¨ç¤ºä¸€æœˆï¼‰
 * @param {Livestream[]} lives - ç›´æ’­è®°å½•æ•°ç»„
 * @returns {CalendarCell[]} æ—¥å†å•å…ƒæ ¼æ•°ç»„
 * 
 * @category Functions
 * @subcategory Calendar
 * 
 * @version 1.0.0
 * @since 2024-01-01
 * 
 * @see {@link CalendarCell} æ—¥å†å•å…ƒæ ¼ç±»å‹
 * @see {@link Livestream} ç›´æ’­è®°å½•ç±»å‹
 */
const generateCalendarCells = (
  year: number,
  month: number,
  lives: Livestream[]
): CalendarCell[] => {
  // å®ç°é€»è¾‘
  const firstDay = new Date(year, month, 1).getDay() || 7;
  const days = new Date(year, month + 1, 0).getDate();
  
  const cells: CalendarCell[] = [];
  
  // ç©ºç™½å•å…ƒæ ¼
  for (let i = 1; i < firstDay; i++) {
    cells.push({ day: null, date: '' });
  }
  
  // æ—¥æœŸå•å…ƒæ ¼
  for (let i = 1; i <= days; i++) {
    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
    const live = lives.find(l => l.date === dateStr);
    cells.push({ day: i, date: dateStr, live });
  }
  
  return cells;
};
```

---

### 3.5 å¤æ‚é€»è¾‘æ³¨é‡Š

```typescript
// è®¡ç®—æ—¥å†å•å…ƒæ ¼
const calendarCells = useMemo(() => {
  const cells = [];
  
  // æ·»åŠ ç©ºç™½å•å…ƒæ ¼
  // è¯´æ˜ï¼šæ ¹æ®å½“æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ ï¼Œåœ¨æ—¥å†å¼€å¤´æ·»åŠ ç›¸åº”æ•°é‡çš„ç©ºç™½å•å…ƒæ ¼
  // ä¾‹å¦‚ï¼š2024å¹´1æœˆ1æ—¥æ˜¯å‘¨ä¸€ï¼Œä¸éœ€è¦ç©ºç™½å•å…ƒæ ¼
  //      2024å¹´2æœˆ1æ—¥æ˜¯å‘¨å››ï¼Œéœ€è¦æ·»åŠ 3ä¸ªç©ºç™½å•å…ƒæ ¼ï¼ˆå‘¨äºŒã€å‘¨ä¸‰ã€å‘¨å››ï¼‰
  for (let i = 1; i < daysInMonth.firstDay; i++) {
    cells.push({ day: null, date: '' });
  }
  
  // æ·»åŠ æ—¥æœŸå•å…ƒæ ¼
  // è¯´æ˜ï¼šéå†å½“æœˆæ‰€æœ‰æ—¥æœŸï¼Œæ¯ä¸ªæ—¥æœŸå•å…ƒæ ¼åŒ…å«ï¼š
  // - day: æ—¥æœŸæ•°å­—
  // - date: æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆYYYY-MM-DDæ ¼å¼ï¼‰
  // - live: è¯¥æ—¥æœŸçš„ç›´æ’­è®°å½•ï¼ˆå¦‚æœæœ‰ï¼‰
  for (let i = 1; i <= daysInMonth.days; i++) {
    const dateStr = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
    
    // æŸ¥æ‰¾è¯¥æ—¥æœŸçš„ç›´æ’­è®°å½•
    // è¯´æ˜ï¼šé€šè¿‡æ—¥æœŸå­—ç¬¦ä¸²åŒ¹é…livesæ•°ç»„ä¸­çš„ç›´æ’­è®°å½•
    const live = lives.find(l => l.date === dateStr);
    
    cells.push({ day: i, date: dateStr, live });
  }
  
  return cells;
}, [daysInMonth, lives, currentDate]);
```

---

### 3.6 ç±»å‹æ³¨é‡Š

```typescript
/**
 * æ—¥å†å•å…ƒæ ¼ç±»å‹
 * 
 * è¡¨ç¤ºæ—¥å†ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå•å…ƒæ ¼
 * 
 * @interface
 * @property {number | null} day - æ—¥æœŸæ•°å­—ï¼Œnullè¡¨ç¤ºç©ºç™½å•å…ƒæ ¼
 * @property {string} date - æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆYYYY-MM-DDæ ¼å¼ï¼‰ï¼Œç©ºç™½å•å…ƒæ ¼ä¸ºç©ºå­—ç¬¦ä¸²
 * @property {Livestream | undefined} live - è¯¥æ—¥æœŸçš„ç›´æ’­è®°å½•ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºundefined
 * 
 * @example ç©ºç™½å•å…ƒæ ¼
 * ```typescript
 * const blankCell: CalendarCell = { day: null, date: '' };
 * ```
 * 
 * @example æœ‰ç›´æ’­çš„æ—¥æœŸå•å…ƒæ ¼
 * ```typescript
 * const liveCell: CalendarCell = {
 *   day: 15,
 *   date: '2024-01-15',
 *   live: {
 *     date: '2024-01-15',
 *     title: '2024å¹´1æœˆ15æ—¥ç›´æ’­',
 *     // ...
 *   }
 * };
 * ```
 * 
 * @category Types
 * @subcategory Calendar
 * 
 * @version 1.0.0
 * @since 2024-01-01
 */
export interface CalendarCell {
  day: number | null;
  date: string;
  live?: Livestream;
}
```

---

### 3.7 TODOå’ŒFIXMEæ³¨é‡Š

```typescript
// TODO: ä¼˜åŒ–å¤§åˆ—è¡¨æ¸²æŸ“æ€§èƒ½ï¼Œè€ƒè™‘ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
// åŸå› ï¼šå½“æ­Œæ›²æ•°é‡è¶…è¿‡1000æ—¶ï¼Œæ¸²æŸ“æ€§èƒ½æ˜æ˜¾ä¸‹é™
// é¢„è®¡å®Œæˆæ—¶é—´ï¼š2024-02-15
// è´Ÿè´£äººï¼š@å¼ ä¸‰
const renderSongs = () => {
  return songs.map(song => <SongItem key={song.id} song={song} />);
};

// FIXME: æ—¥æœŸé€‰æ‹©å™¨åœ¨æŸäº›æƒ…å†µä¸‹ä½ç½®è®¡ç®—ä¸å‡†ç¡®
// é—®é¢˜æè¿°ï¼šå½“é¡µé¢æ»šåŠ¨åï¼Œé€‰æ‹©å™¨ä½ç½®åç§»çº¦10px
// ä¸´æ—¶æ–¹æ¡ˆï¼šå·²æ·»åŠ scrolläº‹ä»¶ç›‘å¬å™¨é‡æ–°è®¡ç®—ä½ç½®
// é¢„è®¡ä¿®å¤æ—¶é—´ï¼š2024-02-01
// è´Ÿè´£äººï¼š@æå››
const updateSelectorPosition = () => {
  // ...
};
```

---

## å››ã€ç»„ä»¶æ–‡æ¡£æ¨¡æ¿

### 4.1 ç»„ä»¶æ–‡æ¡£æ ‡å‡†æ¨¡æ¿

```markdown
# [ç»„ä»¶åç§°]

## ç»„ä»¶æ¦‚è¿°

ç®€è¦æè¿°ç»„ä»¶çš„åŠŸèƒ½å’Œç”¨é€”ã€‚

## åŠŸèƒ½ç‰¹æ€§

- åŠŸèƒ½1ï¼šæè¿°
- åŠŸèƒ½2ï¼šæè¿°
- åŠŸèƒ½3ï¼šæè¿°

## Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| prop1 | `string` | æ˜¯ | - | å±æ€§1çš„æè¿° |
| prop2 | `number` | å¦ | `0` | å±æ€§2çš„æè¿° |
| prop3 | `CustomType` | å¦ | `undefined` | å±æ€§3çš„æè¿° |

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

\`\`\`tsx
import ComponentName from './ComponentName';

function App() {
  return <ComponentName prop1="value" />;
}
\`\`\`

### é«˜çº§ç”¨æ³•

\`\`\`tsx
function App() {
  const [value, setValue] = useState('default');
  
  return (
    <ComponentName
      prop1="value"
      prop2={value}
      onEvent={(data) => setValue(data)}
    />
  );
}
\`\`\`

## çŠ¶æ€ç®¡ç†

æè¿°ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ç®¡ç†é€»è¾‘ã€‚

## äº‹ä»¶å¤„ç†

| äº‹ä»¶å | å‚æ•° | æè¿° |
|--------|------|------|
| onChange | `(value: string) => void` | å€¼å˜æ›´äº‹ä»¶ |
| onEvent | `(data: CustomType) => void` | è‡ªå®šä¹‰äº‹ä»¶ |

## ä¾èµ–å…³ç³»

- ä¾èµ–1ï¼š`package-name`
- ä¾èµ–2ï¼š`@scope/package-name`

## æ³¨æ„äº‹é¡¹

1. æ³¨æ„äº‹é¡¹1
2. æ³¨æ„äº‹é¡¹2
3. æ³¨æ„äº‹é¡¹3

## æ€§èƒ½è€ƒè™‘

- æè¿°æ€§èƒ½ä¼˜åŒ–ç‚¹
- è¯´æ˜ä½•æ—¶éœ€è¦ä¼˜åŒ–
- æ¨èçš„ä½¿ç”¨æ–¹å¼

## å¯è®¿é—®æ€§

- ARIAå±æ€§è¯´æ˜
- é”®ç›˜å¯¼èˆªæ”¯æŒ
- å±å¹•é˜…è¯»å™¨æ”¯æŒ

## æµè§ˆå™¨å…¼å®¹æ€§

- Chrome: âœ“
- Firefox: âœ“
- Safari: âœ“
- Edge: âœ“

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´è¯´æ˜ |
|------|------|----------|
| 2.0.0 | 2024-01-01 | é‡æ„ç»„ä»¶ï¼Œæ”¯æŒæ–°ç‰¹æ€§ |
| 1.0.0 | 2023-12-01 | åˆå§‹ç‰ˆæœ¬ |

## ç›¸å…³é“¾æ¥

- [è®¾è®¡ç¨¿](é“¾æ¥)
- [éœ€æ±‚æ–‡æ¡£](é“¾æ¥)
- [æµ‹è¯•ç”¨ä¾‹](é“¾æ¥)

## ç»´æŠ¤è€…

- å§“åï¼š@username
- é‚®ç®±ï¼šemail@example.com
```

---

### 4.2 ç»„ä»¶æ–‡æ¡£ç¤ºä¾‹

```markdown
# YearMonthSelector

## ç»„ä»¶æ¦‚è¿°

å¹´æœˆé€‰æ‹©å™¨ç»„ä»¶ï¼Œæä¾›å¹´ä»½å’Œæœˆä»½çš„ä¸‹æ‹‰é€‰æ‹©åŠŸèƒ½ã€‚æ”¯æŒé€šè¿‡ç‚¹å‡»è§¦å‘é€‰æ‹©å™¨å±•å¼€ï¼Œé€‰æ‹©åè‡ªåŠ¨å…³é—­ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **å¹´ä»½é€‰æ‹©**ï¼šæ˜¾ç¤ºå¯ç”¨çš„å¹´ä»½èŒƒå›´ï¼Œæ”¯æŒç‚¹å‡»é€‰æ‹©
- **æœˆä»½é€‰æ‹©**ï¼šæ˜¾ç¤º12ä¸ªæœˆä»½ï¼Œæ”¯æŒç‚¹å‡»é€‰æ‹©
- **è‡ªåŠ¨å…³é—­**ï¼šé€‰æ‹©æœˆä»½åè‡ªåŠ¨å…³é—­é€‰æ‹©å™¨
- **çŠ¶æ€åŒæ­¥**ï¼šé€‰æ‹©å™¨æ‰“å¼€æ—¶åŒæ­¥å½“å‰æ—¥æœŸ
- **ç‚¹å‡»å¤–éƒ¨å…³é—­**ï¼šç‚¹å‡»é€‰æ‹©å™¨å¤–éƒ¨åŒºåŸŸè‡ªåŠ¨å…³é—­
- **èƒŒæ™¯è’™å±‚**ï¼šæ‰“å¼€æ—¶æ˜¾ç¤ºåŠé€æ˜èƒŒæ™¯è’™å±‚

## Props

| å±æ€§å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| `currentDate` | `Date` | æ˜¯ | - | å½“å‰æ˜¾ç¤ºçš„æ—¥æœŸ |
| `minYear` | `number` | å¦ | `2019` | æœ€å°å¯é€‰å¹´ä»½ |
| `onDateChange` | `(date: Date) => void` | æ˜¯ | - | æ—¥æœŸå˜æ›´å›è°ƒ |

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

\`\`\`tsx
import YearMonthSelector from './YearMonthSelector';

function App() {
  const [currentDate, setCurrentDate] = useState(new Date());
  
  return (
    <YearMonthSelector
      currentDate={currentDate}
      onDateChange={setCurrentDate}
    />
  );
}
\`\`\`

### è‡ªå®šä¹‰æœ€å°å¹´ä»½

\`\`\`tsx
<YearMonthSelector
  currentDate={currentDate}
  minYear={2020}
  onDateChange={setDate}
/>
\`\`\`

## å†…éƒ¨ç»“æ„

\`\`\`
YearMonthSelector
â”œâ”€â”€ è§¦å‘æŒ‰é’®ï¼ˆæ˜¾ç¤ºå½“å‰å¹´æœˆï¼‰
â””â”€â”€ YearMonthPicker
    â”œâ”€â”€ èƒŒæ™¯è’™å±‚
    â””â”€â”€ é€‰æ‹©å™¨å®¹å™¨
        â”œâ”€â”€ å¹´ä»½é€‰æ‹©åŒº
        â”‚   â”œâ”€â”€ æ ‡é¢˜ï¼ˆYearï¼‰
        â”‚   â””â”€â”€ å¹´ä»½æŒ‰é’®ç½‘æ ¼
        â””â”€â”€ æœˆä»½é€‰æ‹©åŒº
            â”œâ”€â”€ æ ‡é¢˜ï¼ˆMonthï¼‰
            â””â”€â”€ æœˆä»½æŒ‰é’®ç½‘æ ¼
\`\`\`

## Hooks

ä½¿ç”¨ `useYearMonthSelector` Hook ç®¡ç†çŠ¶æ€ï¼š

\`\`\`typescript
const {
  isOpen,
  setIsOpen,
  tempYear,
  tempMonth,
  yearRange,
  handleYearSelect,
  handleMonthSelect
} = useYearMonthSelector(currentDate, minYear, onDateChange);
\`\`\`

## æ ·å¼è¯´æ˜

- **é€‰æ‹©å™¨å®¹å™¨**ï¼š
  - èƒŒæ™¯è‰²ï¼š`bg-white/98`
  - æ¯›ç»ç’ƒæ•ˆæœï¼š`backdrop-blur-xl`
  - åœ†è§’ï¼š`rounded-[2rem]`
  - é˜´å½±ï¼š`shadow-[0_8px_32px_rgba(0,0,0,0.12)]`
  - è¾¹æ¡†ï¼š`border-2 border-[#f2f9f1]`
  
- **å¹´ä»½/æœˆä»½æŒ‰é’®**ï¼š
  - é»˜è®¤ï¼š`bg-gray-50 text-gray-600`
  - é€‰ä¸­ï¼š`bg-[#d97706] text-white`
  - æ‚¬åœï¼š`hover:bg-gray-100`

## æ³¨æ„äº‹é¡¹

1. **æ—¥æœŸæ ¼å¼**ï¼šç¡®ä¿ä¼ å…¥çš„ `currentDate` æ˜¯æœ‰æ•ˆçš„ `Date` å¯¹è±¡
2. **æœˆä»½èŒƒå›´**ï¼šæœˆä»½æ˜¯ 0-11ï¼Œé€‰æ‹©å™¨å†…éƒ¨æ˜¾ç¤ºæ—¶ä¼š +1
3. **å¹´ä»½èŒƒå›´**ï¼šé»˜è®¤ä» `minYear` åˆ°å½“å‰å¹´ä»½
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ `useCallback` ç¼“å­˜å›è°ƒå‡½æ•°
5. **ç‚¹å‡»å¤–éƒ¨å…³é—­**ï¼šä½¿ç”¨ `useClickOutside` Hook å®ç°

## æ€§èƒ½è€ƒè™‘

- ä½¿ç”¨ `useMemo` ç¼“å­˜ `yearRange` è®¡ç®—
- ä½¿ç”¨ `useCallback` ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°
- é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

## å¯è®¿é—®æ€§

- ä½¿ç”¨è¯­ä¹‰åŒ–çš„ HTML å…ƒç´ 
- æ”¯æŒé”®ç›˜å¯¼èˆªï¼ˆTabã€Enterã€Escapeï¼‰
- ARIA æ ‡ç­¾ï¼š
  - `aria-expanded`ï¼šæŒ‡ç¤ºé€‰æ‹©å™¨æ˜¯å¦å±•å¼€
  - `aria-label`ï¼šæè¿°æŒ‰é’®åŠŸèƒ½

## æµè§ˆå™¨å…¼å®¹æ€§

- Chrome: âœ“ (å®Œå…¨æ”¯æŒ)
- Firefox: âœ“ (å®Œå…¨æ”¯æŒ)
- Safari: âœ“ (å®Œå…¨æ”¯æŒ)
- Edge: âœ“ (å®Œå…¨æ”¯æŒ)

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´è¯´æ˜ |
|------|------|----------|
| 2.0.0 | 2024-01-15 | é‡æ„ç»„ä»¶ï¼Œæ‹†åˆ†YearMonthPicker |
| 1.0.0 | 2023-12-01 | åˆå§‹ç‰ˆæœ¬ |

## ç›¸å…³é“¾æ¥

- [è®¾è®¡ç¨¿](é“¾æ¥)
- [éœ€æ±‚æ–‡æ¡£](é“¾æ¥)
- [æµ‹è¯•ç”¨ä¾‹](é“¾æ¥)

## ç»´æŠ¤è€…

- å§“åï¼š@å¼ ä¸‰
- é‚®ç®±ï¼šzhangsan@example.com
```

---

## äº”ã€å®æ–½æ­¥éª¤

### 5.1 å‡†å¤‡é˜¶æ®µï¼ˆç¬¬1å¤©ï¼‰

#### æ­¥éª¤1ï¼šä»£ç åˆ†æ
- [ ] è¯†åˆ«éœ€è¦æ‹†åˆ†çš„å¤§å‹ç»„ä»¶
- [ ] ç»Ÿè®¡æ¯ä¸ªç»„ä»¶çš„ä»£ç è¡Œæ•°
- [ ] åˆ†æç»„ä»¶çš„ä¾èµ–å…³ç³»
- [ ] ç»˜åˆ¶ç»„ä»¶å…³ç³»å›¾

#### æ­¥éª¤2ï¼šåˆ¶å®šè®¡åˆ’
- [ ] ç¡®å®šæ‹†åˆ†ä¼˜å…ˆçº§
- [ ] åˆ¶å®šè¯¦ç»†çš„æ—¶é—´è®¡åˆ’
- [ ] åˆ†é…ä»»åŠ¡ç»™å›¢é˜Ÿæˆå‘˜
- [ ] å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹

---

### 5.2 ç»„ä»¶æ‹†åˆ†ï¼ˆç¬¬2-4å¤©ï¼‰

#### ä¼˜å…ˆçº§1ï¼šLivestreamPageï¼ˆæœ€å¤æ‚ï¼‰
- [ ] æ‹†åˆ† LivestreamHeader
- [ ] æ‹†åˆ† CalendarControl
- [ ] æ‹†åˆ† YearMonthSelector
- [ ] æ‹†åˆ† CalendarGrid
- [ ] æ‹†åˆ† CalendarCell
- [ ] æ‹†åˆ† LiveDetail
- [ ] æµ‹è¯•æ‰€æœ‰æ‹†åˆ†åçš„ç»„ä»¶
- [ ] ä»£ç å®¡æŸ¥

#### ä¼˜å…ˆçº§2ï¼šSongsPage
- [ ] æ‹†åˆ† PageHeader
- [ ] æ‹†åˆ† TabNavigation
- [ ] æ‹†åˆ†å„ä¸ªæ ‡ç­¾é¡µç»„ä»¶
- [ ] æµ‹è¯•å’Œä»£ç å®¡æŸ¥

#### ä¼˜å…ˆçº§3ï¼šGalleryPage
- [ ] æ‹†åˆ† GallerySidebar
- [ ] æ‹†åˆ† CategoryTree
- [ ] æ‹†åˆ† GalleryGrid
- [ ] æµ‹è¯•å’Œä»£ç å®¡æŸ¥

---

### 5.3 HooksæŠ½å–ï¼ˆç¬¬5-6å¤©ï¼‰

#### é€šç”¨Hooks
- [ ] å®ç° useLocalStorage
- [ ] å®ç° useDebounce
- [ ] å®ç° useClickOutside
- [ ] å®ç° useMediaQuery
- [ ] å®ç° useScrollPosition
- [ ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹

#### ä¸šåŠ¡Hooks
- [ ] å®ç° useLivestreamData
- [ ] å®ç° useLivestreamDetail
- [ ] å®ç° useYearMonthSelector
- [ ] å®ç° useSongData
- [ ] å®ç° useErrorHandler
- [ ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹

---

### 5.4 ä»£ç æ³¨é‡Šï¼ˆç¬¬7å¤©ï¼‰

#### æ–‡ä»¶å¤´æ³¨é‡Š
- [ ] ä¸ºæ‰€æœ‰ç»„ä»¶æ–‡ä»¶æ·»åŠ æ–‡ä»¶å¤´æ³¨é‡Š
- [ ] ä¸ºæ‰€æœ‰Hookæ–‡ä»¶æ·»åŠ æ–‡ä»¶å¤´æ³¨é‡Š
- [ ] ä¸ºæ‰€æœ‰å·¥å…·æ–‡ä»¶æ·»åŠ æ–‡ä»¶å¤´æ³¨é‡Š

#### ç»„ä»¶æ³¨é‡Š
- [ ] ä¸ºæ‰€æœ‰ç»„ä»¶æ·»åŠ JSDocæ³¨é‡Š
- [ ] ä¸ºå¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

#### å‡½æ•°æ³¨é‡Š
- [ ] ä¸ºæ‰€æœ‰å…¬å…±å‡½æ•°æ·»åŠ JSDocæ³¨é‡Š
- [ ] è¯´æ˜å‚æ•°å’Œè¿”å›å€¼
- [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

---

### 5.5 ç»„ä»¶æ–‡æ¡£ï¼ˆç¬¬8å¤©ï¼‰

#### æ–‡æ¡£ç¼–å†™
- [ ] ç¼–å†™LivestreamPageæ–‡æ¡£
- [ ] ç¼–å†™SongsPageæ–‡æ¡£
- [ ] ç¼–å†™GalleryPageæ–‡æ¡£
- [ ] ç¼–å†™å…¶ä»–ç»„ä»¶æ–‡æ¡£

#### æ–‡æ¡£å®¡æŸ¥
- [ ] æŠ€æœ¯å®¡æŸ¥
- [ ] äº§å“å®¡æŸ¥
- [ ] ç”¨æˆ·å®¡æŸ¥

---

## å…­ã€éªŒæ”¶æ ‡å‡†

### 6.1 ä»£ç è´¨é‡æ ‡å‡†

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æ£€æŸ¥æ–¹æ³• |
|------|--------|----------|
| ç»„ä»¶æ–‡ä»¶è¡Œæ•° | < 300è¡Œ | ç»Ÿè®¡å·¥å…· |
| ç»„ä»¶Propsæ•°é‡ | < 7ä¸ª | ä»£ç å®¡æŸ¥ |
| JSXåµŒå¥—å±‚çº§ | < 5å±‚ | ä»£ç å®¡æŸ¥ |
| å‡½æ•°å¤æ‚åº¦ | < 15 | ESLint |
| TypeScriptè¦†ç›–ç‡ | 100% | TypeScriptç¼–è¯‘ |
| ESLintè­¦å‘Š | 0 | ESLint |

### 6.2 åŠŸèƒ½æµ‹è¯•æ ‡å‡†

| æµ‹è¯•é¡¹ | æµ‹è¯•æ–¹æ³• | é¢„æœŸç»“æœ |
|--------|----------|----------|
| ç»„ä»¶åŠŸèƒ½ | æ‰‹åŠ¨æµ‹è¯• | åŠŸèƒ½æ­£å¸¸ |
| ç»„ä»¶äº¤äº’ | æ‰‹åŠ¨æµ‹è¯• | äº¤äº’æµç•… |
| ç»„ä»¶æ ·å¼ | è§†è§‰å¯¹æ¯” | æ ·å¼ä¸€è‡´ |
| ç»„ä»¶æ€§èƒ½ | æ€§èƒ½æµ‹è¯• | æ— æ€§èƒ½ä¸‹é™ |

### 6.3 æ–‡æ¡£å®Œæ•´æ€§æ ‡å‡†

| æ–‡æ¡£é¡¹ | å®Œæ•´åº¦è¦æ±‚ |
|--------|------------|
| ç»„ä»¶æ¦‚è¿° | 100% |
| Propsè¯´æ˜ | 100% |
| ä½¿ç”¨ç¤ºä¾‹ | â‰¥ 2ä¸ª |
| æ³¨æ„äº‹é¡¹ | â‰¥ 3æ¡ |
| ç‰ˆæœ¬å†å² | 100% |

---

## ä¸ƒã€é£é™©ä¸åº”å¯¹

### 7.1 é£é™©è¯†åˆ«

| é£é™© | å¯èƒ½æ€§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|--------|------|----------|
| åŠŸèƒ½å›å½’ | ä¸­ | é«˜ | å®Œæ•´çš„æµ‹è¯•è¦†ç›– |
| æ€§èƒ½ä¸‹é™ | ä½ | ä¸­ | æ€§èƒ½åŸºå‡†æµ‹è¯• |
| æ ·å¼é—®é¢˜ | ä¸­ | ä¸­ | è§†è§‰å›å½’æµ‹è¯• |
| æ–‡æ¡£é—æ¼ | é«˜ | ä½ | æ–‡æ¡£æ£€æŸ¥æ¸…å• |

### 7.2 å›æ»šè®¡åˆ’

å¦‚æœé‡æ„å‡ºç°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. ä½¿ç”¨Gitå›æ»šåˆ°é‡æ„å‰çš„ç‰ˆæœ¬
2. ä¿ç•™é‡æ„å‰çš„ä»£ç ä½œä¸ºå¤‡ä»½
3. åˆ†æ”¯ç­–ç•¥ï¼šåˆ›å»ºé‡æ„åˆ†æ”¯ï¼Œä¸»åˆ†æ”¯ä¿æŒç¨³å®š

---

## å…«ã€æ€»ç»“

ç¬¬å››é˜¶æ®µä»£ç é‡æ„æ˜¯æå‡é¡¹ç›®å¯ç»´æŠ¤æ€§çš„å…³é”®æ­¥éª¤ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„ç»„ä»¶æ‹†åˆ†ã€HooksæŠ½å–ã€ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£ç¼–å†™ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚

### é¢„æœŸæˆæœ

- âœ… æ‰€æœ‰ç»„ä»¶æ–‡ä»¶ < 300è¡Œ
- âœ… æ‰€æœ‰ç»„ä»¶Props < 7ä¸ª
- âœ… æ‰€æœ‰å¤æ‚é€»è¾‘æŠ½å–ä¸ºHook
- âœ… æ‰€æœ‰å…¬å…±ä»£ç æœ‰å®Œæ•´æ³¨é‡Š
- âœ… æ‰€æœ‰ç»„ä»¶æœ‰æ ‡å‡†æ–‡æ¡£

### åç»­ä¼˜åŒ–

é‡æ„å®Œæˆåï¼Œå¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼š
1. æ€§èƒ½ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ã€ä»£ç åˆ†å‰²ï¼‰
2. æµ‹è¯•è¦†ç›–ç‡æå‡
3. å¯è®¿é—®æ€§æ”¹è¿›
4. å›½é™…åŒ–æ”¯æŒ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**ç¼–å†™æ—¥æœŸ**: 2026-01-31
**ç¼–å†™äºº**: XXM Team
**å®¡æ ¸äºº**: å¾…å®š