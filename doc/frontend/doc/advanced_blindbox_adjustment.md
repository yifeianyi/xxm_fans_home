# 自定义盲盒功能调整文档

## 时间
2025年9月18日

## 涉及的函数
1. `initializePrizes` - 初始化转盘奖项
2. `updatePrizes` - 更新转盘奖项
3. `startCallback` - 抽奖开始回调
4. `endCallback` - 抽奖结束回调
5. `applyFilters` - 应用筛选条件
6. `resetFilters` - 重置筛选条件

## 功能描述
调整自定义盲盒功能，实现以下需求：
1. 点开自定义盲盒时，除了展示筛选条件，同时展示一个没有字样的26等份大圆盘
2. 没有按下筛选条件中的确认键时，点击大圆盘的开始按键，出现提示信息，提示用户先完成筛选
3. 如果筛选出来的歌曲不足26等份，大圆盘按照实际筛选出来的歌曲数进行等份

## 实现细节

### 前端实现 (Vue.js)
1. 修改了转盘初始化逻辑，使转盘始终显示26等份
2. 添加了筛选条件检查逻辑，在用户未完成筛选时点击开始按钮会显示提示信息
3. 调整了转盘奖项更新逻辑，支持动态显示筛选结果
4. 修改了筛选和重置功能，使其与新的转盘逻辑兼容

### 后端实现 (Django)
1. 无需修改，后端API已支持所需的所有筛选功能

## 代码修改

### 前端修改
1. 修改了`AdvancedBlindBox.vue`组件中的转盘初始化逻辑
2. 添加了筛选条件检查逻辑
3. 调整了转盘奖项更新逻辑，支持26等份显示
4. 修改了筛选和重置功能的实现

### 后端修改
1. 无需修改

## 使用方法
1. 打开自定义盲盒弹窗，可以看到26等份的空转盘
2. 设置筛选条件（语言、曲风、歌手名）
3. 点击"确定"按钮应用筛选条件
4. 转盘会根据筛选结果更新显示
5. 点击转盘中心的"开始"按钮进行抽奖
6. 如果未应用筛选条件就点击开始按钮，会显示提示信息