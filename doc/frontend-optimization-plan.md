# 前端性能优化计划

## 当前问题分析

### 1. 首页 (Home) 图片不显示问题
**现象**: PageSpeed Insights 测试中首页图片不显示

**根本原因**:
- 图片格式为 WebP，某些测试环境/旧版浏览器不支持
- 缺少图片优化属性（loading, fetchPriority, decoding）
- 单一大图无响应式版本
- 缺少 LQIP (Low Quality Image Placeholder)

**优化方案**:
- [ ] 添加图片加载优先级属性
- [ ] 实现响应式图片（srcset）
- [ ] 添加骨架屏/占位符
- [ ] 考虑提供 JPEG 回退格式

### 2. Songs 页性能问题
**现象**: 页面加载慢，交互卡顿

**根本原因**:
- 表格渲染大量 DOM 节点（全量渲染）
- 无虚拟滚动（Virtual Scrolling）
- 每行数据复杂（标签、按钮等）
- 展开行加载额外数据

**优化方案**:
- [ ] 实现虚拟滚动（react-window 或 @tanstack/react-virtual）
- [ ] 懒加载展开行数据
- [ ] 分页优化（减少每页数量）
- [ ] 组件 memo 优化

### 3. Albums 页性能问题
**现象**: 图片加载慢，LCP 高

**根本原因**:
- 瀑布流布局渲染大量图片
- 无虚拟滚动
- 缩略图优化不足

**优化方案**:
- [ ] 实现虚拟滚动
- [ ] 图片懒加载优化
- [ ] 骨架屏占位

---

## 实施计划

### Phase 1: 首页图片优化 (优先级: 高)
目标: 解决 PSI 测试图片不显示问题

### Phase 2: Songs 页虚拟滚动 (优先级: 高)
目标: 提升大数据列表性能

### Phase 3: Albums 页虚拟滚动 (优先级: 中)
目标: 优化图片列表性能

### Phase 4: 通用优化 (优先级: 中)
- 路由预加载
- 字体优化
- 第三方脚本延迟加载
